# 说明

## 添加以下前置条件

- 日志文件个数不定，放在同一个目录下，没有子目录
- 日志文件是文本文件
- 所有日志文件内容都是同一天的日志
- 假定程序是采用多进程或多线程并发写入到多个日志，因此同一个时间段的日志会写入到多个文件中
- 文件尺寸可能会大于内存
- 每行错误日志都包含 error 关键字
- 统计每个 process 每小时出现的错误数， process 用 processname 来区分

## 设计要点

- 考虑到文件大小可能会超过1G，采用临时文件来临时保存中间结果
- 综合考虑可维护性和性能，用静态方式创建线程和 queue 来简化设计

## 处理流程

- 日志解析后写入到 queue ，同一小时内的日志写入到同一个 queue ，即共有24个 queue 
- 启动24个线程，每个线程消费一个 queue ，写入到按小时命名的临时文件中
- 解析临时文件，统计各个进程在本小时内产生的错误日志行数
- 上传
