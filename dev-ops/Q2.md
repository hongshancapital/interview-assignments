### 1.设计文档
#### 1.1 框架设计图如下所示：
![avatar](https://note.youdao.com/yws/api/personal/file/E304B2A85BF34E91B44EA9F3278F116C?method=download&shareKey=e27517378255da5c31984010744d1c29)

#### 1.2 执行与部署步骤
1. 调用AWS SDK先创建好VPC、ECS等资源
2. 开发程序
3. maven执行junit编写好的测试程序
4. 如果执行失败，回到源码重新修改程序，再次执行junit测试
5. 在jenkins创建一个maven任务，配置git地址，设置build相关参数，设置post steps里需要执行的脚本内容：
```shell
#!/bin/bash
  
PROJECT_NAME="myapp"  
JAR_PATH="/var/jenkins_home/workspace/$PROJECT_NAME/target/"
JAR_NAME="myapp-0.0.1-SNAPSHOT.jar"
PORT=8080
EMAIL="hongyx2014@126.com"
IMAGE_NAME="myapp"
REPOSITORY="aws_account_id.dkr.ecr.region.amazonaws.com"
  
# Dockerfile
DOCKERFILE_NAME="Dockerfile"

if [ -d $JAR_PATH ];then
  cd $JAR_PATH
  dockerfile=`ls -l|grep $DOCKERFILE_NAME`
  if [ -n "$dockerfile" ];then
      echo "Dockerfile has existed!"
  else
      touch $DOCKERFILE_NAME
      echo "FROM java:8-jre" >> $DOCKERFILE_NAME
      echo "MAINTAINER $EMAIL" >> $DOCKERFILE_NAME
      echo "ADD $JAR_NAME /$JAR_NAME" >> $DOCKERFILE_NAME
      echo "EXPOSE $PORT" >> $DOCKERFILE_NAME
      echo "ENTRYPOINT [\"/usr/bin/java\",\"-jar\",\"$JAR_NAME\"]" >> $DOCKERFILE_NAME
  fi
  docker build -t $IMAGE_NAME .
  docker tag $IMAGE_NAME $REPOSITORY/$IMAGE_NAME:v1
  docker push $REPOSITORY/$IMAGE_NAME:v1
  echo "docker build && push success"
else
  echo "jar path not exists"
fi
```
6.AWS Fargate创建Task definition
7.AWS创建Service发布服务
8.设置AWS CloudWatch管理日志，监控CloudWatch中的应用日志，当出现ERROR关键字时通过AWS SNS发送邮件告警

### 2.Dockerfile
```shell
FROM java:8-jre
MAINTAINER hongyx2014@126.com
ADD myapp.jar /myapp.jar
EXPOSE 8080
ENTRYPOINT ["/usr/bin/java","-jar","myapp.jar"]
```

### 3.CI/CD的代码或配置
详见1.2步骤

### 4.创建Infrastructure的代码
未用过AWS及AWS SDK

### 5.其他用到的代码和配置文件
无