
# 需求

实现短域名服务
撰写两个 API 接口:
- 短域名存储接口：接受长域名信息，返回短域名信息
- 短域名读取接口：接受短域名信息，返回长域名信息。

限制：
- 短域名长度最大为 8 个字符
- 采用SpringBoot，集成Swagger API文档；
- JUnit编写单元测试, 使用Jacoco生成测试报告(测试报告提交截图)；
- 映射数据存储在JVM内存即可，防止内存溢出；

# 假设

- 域名应该有过期时间限制，默认为10分钟超时
- 内存中能够存储的最大映射条数为100万条，超出这个条数限制时会触发清理，清理掉过期的映射。如果还是达到了上限则抛出错误。

# 方案

短域名通过hash生成，内存中保存长短域名的映射关系。由于内存空间有限，所以需要设置过期时间，和映射表最大容量。

1. 短域名生成方式：原有长域名hash之后转换为数值，转换为62进制的字符串表示
2. 短域名冲突解决：重新加盐计算
3. 短域名保存方式：存放在内存的两个ConcurrentHashmap中，一个存储长域名->短域名的映射，一个存储短域名->长域名的映射
4. 短域名转换为长域名方式：读取内存中的映射关系表获取
5. 防止内存溢出方式：设置映射关系表最大容量
6. 短域名过期方式：懒删除+达到最大容量时批量删除

