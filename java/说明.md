## 项目说明

### 代码实现

1.项目采用MVC解构，Controller中定义了2个GET方法，一个是根据长链接取短链接，一个是根据短链接获取长链接。

2.短链接的实现 是通过存储 长链接和短链接的对应关系。短链接路径是通过数据库自增长的主键来实现，为了防止短链接长度超过8，限制了数字的长度，超过8时会重置为1。

3.项目中使用UrlDataContainer对象来存储数据，UrlDataContainer由2个Map对象组成，一个以短链接为key，长链接为value，一个相反，一个map修改后会同步另一个map，目的是为了提高查询的速度，为了防止内存溢出，使用在LinkedHashMap的基础上实现了一个LRULinkedHashMap，设定的默认长度为4048。

### 单元测试

1.单元测试使用的junit4+mockito，由于个人时间得关系，测试异常时只判断了异常类型，可以用hamcrest判断具体自定义异常信息。

2.仅仅针对service层了单元测试，controller一般都是一些输入输出参数的校验，习惯不做单测。

3.测试service层时，本来应该mock dao层，减少dao对service影响，mockito不支持mock静态变量，可以考虑使用powermock。

### 性能测试

1.采用jmeter进行性能测试，由于整个操作都在本机完成，数据也都是存在jvm中，tps非常的高。

2.两个接口都是在200个用户并发时，性能最佳，还可以进步缩小范围找到性能拐点。

3.压测图片见附件。
