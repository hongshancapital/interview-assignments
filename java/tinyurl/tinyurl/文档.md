# 1.设计思路

## 1.1 短链接算法设计

1）先通过md5算法将长链接+key转为32位加密字符

2）取第三段8 位16 进制与 0x3FFFFFFF 进行位与运算，把得到的值与 0x0000003D 进行位与运算，取得字符数组 chars 索引，把取得的字符相加，每次循环按位右移 5 位，得到6位字符串

3）将获得的字符串作为短链接存入缓存中

## 1.2 缓存设计

1）线程安全性。使用ConcurrentHashMap作为数据保存容器，使用AtomicInteger计算当前大小。

2）淘汰算法。使用LRU算法淘汰老的数据，保证缓存最大不超过1最大大小，防止内存溢出。

3）单例模式。以免生成多块缓存，防止内存溢出。



# 2.架构设计图

# 3.测试

1.测试生成的短链接是否小于8位

2.测试使用短链接获取的长链接是否正确

3.测试使用不存在的短链接获取的长链接是否跳转默认链接

4.测试多线程安全性

5.测试数据远超缓存最大数据的时候，缓存的数量，是否内存溢出