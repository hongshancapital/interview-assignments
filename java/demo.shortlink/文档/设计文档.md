# 短链接服务设计文档

## 需求
撰写两个 API 接口:
- 短域名存储接口：接受长域名信息，返回短域名信息
- 短域名读取接口：接受短域名信息，返回长域名信息。

限制：
- 短域名长度最大为 8 个字符
- 采用SpringBoot，集成Swagger API文档；
- JUnit编写单元测试, 使用Jacoco生成测试报告(测试报告提交截图)；
- 映射数据存储在JVM内存即可，防止内存溢出；

## 设计思路

### 一、生成短链接
	1，获取到唯一的全局ID
	   a. 如何保证全局id唯一
	   b. 要考虑并发量大的问题(利用id生成器，用一个线程不停的生成id，保证唯一性和顺序性，然后将生成的id放入队列中（先进先出、保证顺序），工作线程要获取id时直接从队列头拿出来即可）
	2，长链接及id存入数据库（可暂时使用JVM内存存）
		不需要考虑并发量问题
	3，将id进行短转换
	   a.不需要考虑并发量问题 
	   b.id长度需要采用62进制保证短域名长度在8个字符以内
	4, 拼接成短链接返回
	   a.不需要考虑并发量问题
### 二、访问短链接
    1，后端收到短链接解析请求
		a.不需要考虑并发量问题
	2，接收获取到请求参数
		a.不需要考虑并发量问题
	3，将参数还原为id( 取十进制 ）
		a.不需要考虑并发量问题
	4，读数据库取id对应的长链接（可暂时使用JVM内存中取）
		a.要考虑并发量问题（i/o性能问题，可考虑使用缓存）
		b. 布隆过滤器->JVM本地缓存(LRU算法） -> redis缓存 -> 数据库
	5，服务器或者浏览器端重定向
		a.不需要考虑并发量问题
