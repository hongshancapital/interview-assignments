### 1、测试案例

单交易基准测试、混合容量测试，混合容量测试两个接口按1:1的比例进行。

### 2、测试指标

CPU使用率小于80%

内存使用率小于80%

短域名存储接口、短域名读取接口响应时间低于100ms。

### 3、测试步骤

3.1、以50并发为一个梯度，逐步加压，直到超过任一测试指标，得到最大并发数，每个个梯度压测时间不小于10分钟。

3.2、降低上一次测试最大并发值，直到任一指标接近临界值，得到最优并发数。最优并发数压测时间不小于10分钟。

3.3、使用最优并发数-（最大并发数-最优并发数）得到数值，以此数值进行压测，压测时间不小于10分钟。

3.4、以上一次压测并发数-（最大并发数-最优并发数）得到数值进行压测，压测时间不小于10分钟。

3.5、观察得到四组混合容量压测结果，观察这四组压测结果的TPS、响应时间、CPU使用率、内存使用率、网络IO的变化。

### 4、测试工具

4.1、安装prometheus进行数据采集服务器的CPU使用率、内存使用率、网络IO数据。安装grafana将这些数据进行图标展示。

4.2、使用jmeter进行压测，得到聚合报告，并观察TPS趋势图、响应时间趋势图等。

### 5、压测

5.1、使用jmeter以最优并发数进行压测，压测24小时，得到TPS、平均响应时间、CPU使用率、内存使用率、网络IO等数据，观察是否符合标准。

5.2、压测完成后将内存dump下来，进行分析。

5.3、压测过程中监控JVM内存情况，行程趋势图，分析JVM内存垃圾回收情况。可以在压测过程重手动执行垃圾回收命令。

5.4、将以上信息根据要求整理成测试报告。





