# Java Assignment

# 设计思路

###实现方式
- 采用自增id的发号器为每一个长链接生成短链接 无碰撞
- 发号器:正式开发中可以利用redis的单线程自增INCR/mysql的自增id来当作发号器
###可能存在的问题
- 安全问题:可能会被穷举你的短链地址 优化方案:起始值,多个发号器单双号
- 集群部署时，并发访问短连接覆盖问题:
  1. 使用分布式锁来处理 redisLock/ZK
  2. 利用已存在的长链接构建布隆过滤器。如果长链接不存在,生成短链接。存在 查询缓存/数据库,返回已生成的url。
- 缓存数据策略:根据url的活跃性/业务需求,使用redis设置相应的TTL,或者使用相关LRU淘汰策略
###内存溢出
- 利用java软引用的特性防止内存溢出
- GC之后软引用如果回收会导致已生成的短链接找不到对应长链接
- 正式开发中需要使用redis相关中间件做缓存,最后存储到MYSQL