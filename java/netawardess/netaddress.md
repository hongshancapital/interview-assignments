# Java Assignment 
# 1、实现短域名服务（细节可以百度/谷歌） 
## 1.1撰写两个 API 接口:
	1.短域名存储接口：接受长域名信息，返回短域名信息
    2.短域名读取接口：接受短域名信息，返回长域名信息。
## 1.2要求：
    1.短域名长度最大为 8 个字符
    2.采用SpringBoot，集成Swagger API文档；
    3.JUnit编写单元测试, 使用Jacoco生成测试报告(测试报告提交截图即刻)；
    4.映射数据存储在JVM内存即可，防止内存溢出；

## 2、设计思想
### 2.1总体设计
	2.1.1生成短链接：首先想到从26个英文字母+10个数据随机抽取8个组成短链接，随机产生的具有随机性，同一个长连接可能生成不同短链接，此方案不合适，随机性太强舍弃。
		编写一个算法输入一个长连接字符串返回可要求的字符。参考网络文章都是将url进行md5加密与16进制按位与运算，得到一个32以内的索引。再循环拼接成想要的字符串。  
	2.1.2长短链接相互转换：将长地址转成短地址，短地址转成长地址，这俩者关系一一映射，不考虑数据库，不考虑redis,最好的方式就是存放map(键值对映射)。
	2.1.3为了更好体验加安全性请求时加入用户概念，长短链接相互转换要加上userId(用户ID),由于只是一个小练习，系统会取默认用户。
	2.1.4系统全部采用post请求，系统启动后http://系统访问路径/swagger-ui/，来查看接口文档。
### 2.2生成短路径
	用户请求getShortUrl方法校验路径是否合法，查找用户，检验是否生成短链接，取用户keyId生成短链接,测试中发现长链接路径相同只有后面几位不同大约40万左右数据会产生重复短链接，
	此时取用户keyId2再次生成短链接。将用户Id+短链接、用户Id+长连接作为key映射map中，测试同一用户千万相似数据不会重复。
### 2.3获取长路径
	用户请求getLongurl方法校验路径是否合法，传入的短路径作为key从map中查找长链接，没找到可能数据被清除、此链接不是生成的。
### 2.4清除数据
    考虑到数据存放内存中，未持久化，在设计时增加过期属性，在映射短路径时设置过期时间，系统定时任务去检查过期数据。
### 2.5测试
	默认用户测试循环1千万数据未有异常,未产生重复数据。可执行com.hsjt.example.netaddress.HsjtNetaddressApplicationTests。
### 2.5补充
    为了提高代码覆盖率，本功能将一些javaBean和校验的工具类封装成了jar。