### 设计思路

#### 算法方案
短码一般是由  `[a - z, A - Z, 0 - 9]`  这62 个字母或数字组成，短码的长度也可以自定义，但一般不超过8位。比较常用的都是6位，6位的短码已经能有568亿种的组合：(26+26+10)^6 = 56800235584，已满足绝大多数的使用场景。
目前比较流行的生成短码方法有：自增id、摘要算法、普通随机数。

本方案采用摘要算法来实现长短域名映射。

算法过程：
1.  将长网址md5生成32位签名串,分为4段, 每段8个字节；
2.  对这四段循环处理, 取8个字节, 将他看成16进制串与0x3fffffff(30位1)与操作, 即超过30位的忽略处理；
3.  这30位分成6段, 每5位的数字作为字母表的索引取得特定字符, 依次进行获得6位字符串；
4.  总的md5串可以获得4个6位串；取里面的任意一个就可作为这个长url的短url地址；

**这种算法，有一定的重复几率，不过几率很小。但是该方法生成的短码位数是固定的，也不存在连续生成的短码有序的情况。**

#### 存储方案
由于long_url与short_url的映射关系存储在JVM内存，如果存储的映射数据过多内存溢出问题；

解决方案：
1. 采用LinkedHashMap按照插入顺序存入映射关系；
2.  如果该端域名被访问，则将映射关系移动到LinkedHashMap队尾；
3. 设置一个最大缓存数量，一旦缓存数据大于这个值就清除前N个映射关系；


#### 接口流程图

##### 短域名存储接口
![短域名存储接口](http://tva1.sinaimg.cn/large/5595b9dbgy1h1iixev7cwj209k0im74v.jpg)
#### 短域名读取接口
![短域名读取接口](http://tva1.sinaimg.cn/large/5595b9dbgy1h1iixewt1nj20aq0cm0t3.jpg)

#### 总结

该实现方案仅做了最基础的实践，未考虑高并发和海量请求下的情况。