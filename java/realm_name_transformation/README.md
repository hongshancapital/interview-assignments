# shor_url
该项目主要实现长域名转换短域名，核心接口有
* 长域名转换成短域名接口
* 通过短域名获取长域名

<br/>
<br/>
为了减少中间件的引入，长域名短域名映射主要存储在内存中。

## 短域名核心设计
- 采用生成自增ID，转换成62进制生成短域名的方式处理。
  - 只要ID不超过 281474976710656 即62的8次方，就可以保证位数在8位
  - 不考虑多机环境或分布式环境
    - 分布式环境映射不能存在本机内存，如果分布式环境，需要一个全局自增ID，可以全局发号或数据库自增-非分库分表
    - 真实线上环境应该将tinyUrl映射关系存储到DB或NoSQL中
- guava 缓存存储长域名和短域名的映射关系，为了控制内存溢出，设置缓存大小，采用concurrentHashMap存储倒排-为了取短域名换长域名

## 压测方案
- 采用apache ab进行简单压测
  - ab -n 100 -c100 http://localhost:8080//api/short/url?url=aaa
- jmeter编写脚本压测
