### 方案选型
#### 1、hash算法
   存在hash碰撞问题，如需解决需要解决算法问题，限制8字符长度碰撞概率应该比较大，放弃
#### 2、可逆算法
   实现比较复杂，存在大量计算, 保存数据比较麻烦 算法参考：
   [一种长域名与短域名互相转化的方法及装置](https://zhuanli.tianyancha.com/b8949dfd07e44dd4a2edf01587e63ca6)
#### 3、发号器 <选用>
   设计简单，8位使用62进制表示，可以使用 （63的8次方-1）非常大，数据存储简单；
   
   目前代码当前存储按照内存设计：
   1. 短链接保存Long类型递增，接口返回时进行62进制转换返回字符串, 使用者拼接服务器域名使用
   2. 添加缓存LRU 保证内存数据为活跃数据，同时减小内存压力 通过 长链接、短链接为key各缓存一次
   3. 缓存最大长度可设置 （目前硬编码，可以放入配置文件中方便调整）
   4. 数据保存 实现IStorage 接口其中包括 保存映射关系、发号器最大值、通过短链接获取长链接、已经长链接获取单链接方法
   5. 目前使用内存实现，通过双向Map 保存在内存发布查询数据
   6. 后期可以考虑redis实现，发号器通过redis setnx自增，数据保存使用 zset数据结构保存 短链接(Long类型)对应score，
   可以通过value查询score, 同时通过score 查询 value 支持分布式部署
   
    说明：题目是“实现短域名服务” 域名本身就是很好记，一般也不太长，专门对域名进行处理使用的不多，
    基本都是类似微博长链接变短链接，所以我这里域名兼用了url（基本没有对URL进行校验）
   ![swagger](https://gitee.com/wenchaogong/images/blob/master/swagger.png)
   ![jacoco](https://gitee.com/wenchaogong/images/blob/master/jacoco.png)
   [看不了图片](https://gitee.com/wenchaogong/images)

### 性能测试
    1、对两个接口分别进行并发测试：
    2、测试并发数：1、2、5、10、20、50
    3、调用总次数12000次
    4、使用工具JMeter
    性能测试结论：
    1、线程数在10个以下时，TPS随并发数的提高，提高明显，平均相应时间短
    2、线程10到20之间，TPS 提升不大，平均相应时间增大也不明显
    3、项目20 到50 TPS 提升缓慢，平均响应时间变长
    4、项目正常并发控制在20一下较好，TPS稳定在6000左右，相应时间较短 1ms左右
    
    文档不支持导出图片，或者分辨率过低，直接提交了文件