## **一.  概要设计**

### 1. 目的
*  实现长短域名的转换: 
  1. 接收长域名时返回转换后的短域名；
  2. 接收短域名时返回转换前的长域名。

#### 2.开发环境
- 开发语言：TypeScript 4.9.3
- DB：Redis 7.0.5
- DB 插件: ioredis 5.2.4
- OS:  MacOS 11.6
- 测试工具: Jest 29.3.1  

#### 3.实现方案
1. **长域名转短域名方案：**
   * 接收到有效长域名时，检索Redis中是否存在对应的短域名，若存在直接返回对应的短域名；
   * 不存在时，取得Redis中的ID自增值，将该ID转换为62进制数后的字符串(最大为8个字符)；
   * 作为该长域名的转换后短域名返回，用 “短域名-长域名” 的key-value形式存入Redis中。
2. **短域名转长域名生成方案:**
   *  接收到短域名时，在DB中查询是否存在对应的长域名，若存在返回该长域名；
   * 若不存在，返回不存在的信息提示

## **二.  Redis设计**
  1.  自增序列用的key名：auto_uid, 初始值:10000001
  2.  短域名-长域名(key-value)

## **三. 接口定义**
1.  **长域名转短域名接口**
```
 async longToShort(longUrl:string): Promise<string>
```
2.   **短域名转长域名接口**
```
 async shortTtoLong  (shortUrl: string): Promise<string>
```

## **四.接口实现**
1.  **长域名转短域名**
![[截屏2022-11-19 下午2.07.43.png]]
2.  **短域名转长域名**
![[截屏2022-11-19 下午2.20.52.png]]