# domain-convert
安装步骤:

npm install -g cnpm -registry=https://registry.npm.taobao.org   -----安装镜像

cnpm install -----安装依赖

npm run start  -----启动程序

npm run debug -----启动调试

npm run test ----执行单元测试并显示覆盖率


#### 单元测试覆盖率

--------------------|---------|----------|---------|---------|-------------------
File                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
--------------------|---------|----------|---------|---------|-------------------
All files           |   81.25 |       50 |   69.56 |    83.5 | 
 model              |   88.88 |       50 |   66.66 |   88.88 | 
  UrlEntity.ts      |   88.88 |       50 |   66.66 |   88.88 | 26,29
 repositories       |   68.88 |       50 |      50 |   71.42 | 
  DataRepository.ts |   71.42 |       40 |      50 |   77.27 | 14-15,21,24,32   
  UrlRepository.ts  |    64.7 |       75 |      50 |   61.53 | 11-15
 service            |      84 |       50 |     100 |      85 | 
  ApiService.ts     |      84 |       50 |     100 |      85 | 18-19,28
 tools              |   95.83 |       50 |     100 |   95.83 | 
  StrTool.ts        |   95.83 |       50 |     100 |   95.83 | 25
--------------------|---------|----------|---------|---------|-------------------


#### 在线部署测试服务器地址:

http://www.coding-farmer.icu/api


#### API集成测试案例及结果

短域名存储接口:

服务url(post):http://www.coding-farmer.icu/api/long2short


测试软件:POSTMAN-post  body-raw-text

测试用例:

请求数据:https://github.com/luoyuzhao/interview-assignments/tree/22master/fullstack/asdadadw2dassssssASDASDASD2

返回结果:https://github.com/OjUpRAB


短域名读取接口:

服务url(post):http://www.coding-farmer.icu/api/short2long

测试用例:

请求数据:https://github.com/OjUpRAB

返回结果:https://github.com/luoyuzhao/interview-assignments/tree/22master/fullstack/asdadadw2dassssssASDASDASD2


#### Redis存储结构


KEY                 | value   | description 
--------------------|---------|----------
DATA_NUM            | Number  | 生成ID用于产生唯一id
长域名MD5值          | 短域名  | 用于获取已存在的短域名
短域名值             | 长域名  | 用于还原长域名


### 可能存在的假设

1.当时间足够长，每新增一次 自增id足够大时,会最终累计溢出

2.在巨量数据的分布式系统中，需要保证全局唯一性id 这需要修改获取id为雪花算法