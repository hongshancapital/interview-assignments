# TypeScript Backend Engineer Assignment

## 一. 需求分析

1. 一般短域名会用短信、邮件等推广等场景中，301重定向，将无法统计用户统计次数，302重定向可以满足统计次数，但是会增加服务器压力，但我们可以通过Redis进行缓存处理，减少服务器读写压力
2. 短域名最大限制8个字符，且数据库索引是排序的B系列树，因此需要保证有序递增前提下，一般算法有UUID、自增id、雪花算法等
  * UUID：16个字节128位明显超出，不适用
  * 自增id：ID号单调自增，可以实现一些对ID有特殊要求的业务，但强依赖DB，当DB异常时整个系统不可用，属于致命问题
  * 雪花算法：毫秒数在高位，自增序列在低位，整个ID都是趋势递增的，不依赖数据库等第三方系统，以服务的方式部署，稳定性更高，生成ID的性能也是非常高的，可以根据自身业务特性分配bit位，非常灵活，遂采用此方法的自定义版本

## 架构设计
  ![img](screenshot/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1.png)

  采用MySQL持久化存储短链，Redis缓存缓解读写压力

## 流程图
  ![img](screenshot/%E6%B5%81%E7%A8%8B%E5%9B%BE.png)

## 测试结果
  ![img](screenshot/%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.png)