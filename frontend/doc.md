# 轮播图

## 功能

1. 轮播展示商品信息。
2. 定时（每隔 3 秒）切换到下一帧。循环切换，最后一帧的下一帧为第一帧。如果仅有 1 帧，则不切换。
3. 底部动画显示当前帧的切换进度。

除此之外，额外实现了以下功能，以提供更好的用户体验，同时便于扩展，满足未来的需求。

1. 鼠标位于轮播图上时，可停止切换，便于用户查看当前轮播内容。
2. “定时切换时间”可调整。
3. 轮播内容可配置。

做的优化有：

1. 动画：使用 CSS Transition 实现帧切换动画，以及底部的切换进度动画，确保用户体验流畅。
2. 延迟渲染：初始时，仅渲染当前帧及相邻帧，其余帧不渲染，以提高渲染性能，使用户体验更流畅。
3. 图片：压缩图片大小，减少网络传输时间，提升体验。

## 模块设计

## 设计思考

* 分别设计轮播组件与轮播内容，将两部分解耦，有助于后续的扩展，满足轮播内容的定制化需求。
* 由于轮播内容为商品信息，所有帧内容大致相同，因此，抽象出“商品轮播内容组件”。同时，将商品信息抽象为数据配置，未来也可从服务端获取。

### 模块列表

1. 轮播组件（components/Carousel）
* 轮播内容（包括：结构、样式、帧数量）可随意定制，通过子组件传入。
* switchInterval：支持定时切换到下一帧，“定时切换时间” 可设置，默认 3 秒（最短 600 毫秒）。
* pauseOnHover：当鼠标位于轮播图上时，可停止切换，便于用户查看当前轮播内容，默认 true。
* lazyRenderEnabled：支持延迟渲染，初始时，仅渲染当前帧及相邻帧，其余帧不渲染，以提高渲染性能，默认 true。
* className：自定义类名，用于覆盖默认轮播样式。

2. 轮播指示器组件（components/CarouselIndicator）
* 动画显示当前帧的切换进度。
* 样式可定制。

3. 轮播帧组件（components/CarouselSlice）
* 轮播内容的包装。
* 支持延迟渲染：初始时，仅渲染当前帧及相邻帧，其余帧不渲染，以提高渲染性能。

4. 商品轮播内容组件（components/CommoditySlice）
* 用于展示商品标题、描述、图片等信息。

5. 计时器（lib/timer）
* 支持启动、停止。
* 支持定时触发回调方法。
* 浏览器卡顿时，延迟回调，不会造成回调堆积。

## 实现

### 技术

* React Hooks
* TypeScript
* Sass

## 测试

* 商品轮播图（App.test.tsx）
* 轮播组件（components/Carousel/index.test.tsx）
* 商品轮播内容组件（components/CommoditySlice/index.test.tsx）
* 计时器（lib/timer/index.test.ts）
