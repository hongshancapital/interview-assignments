{"version":3,"sources":["component/Carousel/Bar.tsx","component/Carousel/index.tsx","App.tsx","index.tsx"],"names":["Bar","attr","active","onFinish","el","useRef","useEffect","current","onEnd","addEventListener","removeEventListener","className","ref","Index","timer","toolbarStyle","data","style","useState","setCurrent","rolling","setRolling","needIndex","prevCurrent","index","undefined","length","currentEl","children","scrollIntoView","role","onScroll","clearTimeout","Number","setTimeout","map","item","theme","title","description","icon","onMouseEnter","src","App","Carousel","height","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"oPA4CeA,MA7Bf,YAAiD,IAAlCC,EAAiC,EAAjCA,KAAMC,EAA2B,EAA3BA,OAAQC,EAAmB,EAAnBA,SACrBC,EAAKC,iBAAO,MAkBlB,OAhBAC,qBAAU,WACR,IAAQC,EAAYH,EAAZG,QAER,GAAIA,EAAS,CACX,IAAMC,EAAQ,WACRL,GAAUA,KAKhB,OAFAI,EAAQE,iBAAiB,eAAgBD,GAElC,WACLD,EAAQG,oBAAoB,eAAgBF,OAG/C,CAACJ,EAAGG,UAGL,gDACMN,GADN,IAEE,cAAaC,EACbS,UAAU,oBACVC,IAAKR,MCwCIS,MA9Df,YAAsD,IAehDC,EAfWC,EAAoC,EAApCA,aAAcC,EAAsB,EAAtBA,KAAMC,EAAgB,EAAhBA,MAC7Bb,EAAKC,iBAAO,MAClB,EAA8Ba,mBAAS,GAAvC,mBAAOX,EAAP,KAAgBY,EAAhB,KACA,EAA8BD,oBAAS,GAAvC,mBAAOE,EAAP,KAAgBC,EAAhB,KACMlB,EAAW,SAACmB,GAChBD,GAAW,GACXF,GAAW,SAACI,GACV,IACMC,SADoBC,IAAdH,EAA0BA,EAAYC,GAC7B,GAAKP,EAAKU,OACzBC,EAAYvB,EAAGG,QAAQqB,SAASJ,GAEtC,OADIG,GAAWA,EAAUE,iBAClBL,MAUX,OACE,sBACEM,KAAK,WACLnB,UAAU,WACVM,MAAOA,EACPL,IAAKR,EACL2B,SAXa,WACfC,aAAalB,GACbA,EAAQmB,OAAOC,YAAW,kBAAMb,GAAW,KAAQ,OAInD,UAOGL,EAAKmB,KAAI,SAACC,GAAD,OACR,sBACEzB,UAAU,gBACV,aAAYyB,EAAKC,MAEjBpB,MAAOmB,EAAKnB,MAJd,UAME,6BAAKmB,EAAKE,QACV,4BAAIF,EAAKG,cACT,4BAAIH,EAAKI,SALJJ,EAAKE,UAQd,qBAAK3B,UAAU,eAAeM,MAAOF,EAArC,SACGC,EAAKmB,KAAI,SAACC,EAAMZ,GAAP,OACR,cAAC,EAAD,CAEEtB,QAASkB,GAAWb,IAAYiB,EAChCrB,SAAUA,EAEVF,KAAM,CACJqC,MAAOF,EAAKE,MACZG,aAAc,WAERlC,IAAYiB,GAAOrB,EAASqB,EAAQ,MALvCY,EAAKE,gBC3DhBtB,G,MAAO,CACX,CACEsB,MAAO,4BACPC,YACE,sDAEE,uBAFF,kBAMFF,MAAO,SAET,CAAEC,MAAO,6BACT,CACEA,MAAO,4BACPE,KAAM,qBAAKE,IAAI,2DAEjB,CAAEJ,MAAO,4BAASE,KAAM,UAWXG,MARf,WACE,OACE,qBAAKhC,UAAU,MAAf,SACE,cAACiC,EAAD,CAAU5B,KAAMA,EAAMC,MAAO,CAAE4B,OAAQ,cCvB7CC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,U","file":"static/js/main.c628d1ea.chunk.js","sourcesContent":["import React, {\r\n  useRef,\r\n  useEffect,\r\n  useState,\r\n  ReactNode,\r\n  HTMLAttributes,\r\n} from \"react\";\r\nimport \"./style.css\";\r\n\r\nexport interface Props {\r\n  active?: boolean;\r\n  onFinish?(): any;\r\n  attr?: HTMLAttributes<HTMLSpanElement>;\r\n}\r\n\r\nfunction Bar({ attr, active, onFinish }: Props) {\r\n  const el = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const { current } = el;\r\n\r\n    if (current) {\r\n      const onEnd = () => {\r\n        if (onFinish) onFinish();\r\n      };\r\n\r\n      current.addEventListener(\"animationend\", onEnd);\r\n\r\n      return () => {\r\n        current.removeEventListener(\"animationend\", onEnd);\r\n      };\r\n    }\r\n  }, [el.current]);\r\n\r\n  return (\r\n    <span\r\n      {...attr}\r\n      data-active={active}\r\n      className=\"carousel-bar-item\"\r\n      ref={el}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Bar;\r\n","import React, { useRef, useState, ReactNode, CSSProperties } from \"react\";\r\nimport Bar from \"./Bar\";\r\n\r\nimport \"./style.css\";\r\n\r\nexport interface Props {\r\n  toolbarStyle?: CSSProperties;\r\n  style?: CSSProperties;\r\n  data: Array<{\r\n    title: string;\r\n    icon?: ReactNode;\r\n    description?: ReactNode;\r\n    theme?: string;\r\n    style?: CSSProperties;\r\n  }>;\r\n}\r\n\r\nfunction Index({ toolbarStyle, data, style }: Props) {\r\n  const el = useRef(null);\r\n  const [current, setCurrent] = useState(0);\r\n  const [rolling, setRolling] = useState(false);\r\n  const onFinish = (needIndex?: number) => {\r\n    setRolling(true);\r\n    setCurrent((prevCurrent) => {\r\n      const nid = needIndex !== undefined ? needIndex : prevCurrent;\r\n      const index = (nid + 1) % data.length;\r\n      const currentEl = el.current.children[index];\r\n      if (currentEl) currentEl.scrollIntoView();\r\n      return index;\r\n    });\r\n  };\r\n\r\n  let timer: number;\r\n  const onScroll = () => {\r\n    clearTimeout(timer);\r\n    timer = Number(setTimeout(() => setRolling(false), 100));\r\n  };\r\n\r\n  return (\r\n    <div\r\n      role=\"carousel\"\r\n      className=\"carousel\"\r\n      style={style}\r\n      ref={el}\r\n      onScroll={onScroll}\r\n    >\r\n      {data.map((item) => (\r\n        <div\r\n          className=\"carousel-item\"\r\n          data-theme={item.theme}\r\n          key={item.title}\r\n          style={item.style}\r\n        >\r\n          <h2>{item.title}</h2>\r\n          <p>{item.description}</p>\r\n          <i>{item.icon}</i>\r\n        </div>\r\n      ))}\r\n      <div className=\"carousel-bar\" style={toolbarStyle}>\r\n        {data.map((item, index) => (\r\n          <Bar\r\n            // 滚动完成后再设置计时属性\r\n            active={!rolling && current === index}\r\n            onFinish={onFinish}\r\n            key={item.title}\r\n            attr={{\r\n              title: item.title,\r\n              onMouseEnter: () => {\r\n                // 样式设置了paused，只在非当前索引猝发\r\n                if (current !== index) onFinish(index - 1);\r\n              },\r\n            }}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Index;\r\n","import React, { ReactNode } from \"react\";\r\nimport Carousel from \"./component/Carousel\";\r\n\r\nimport \"./App.css\";\r\n\r\nconst data = [\r\n  {\r\n    title: \"示例标题1\",\r\n    description: (\r\n      <span>\r\n        换行的\r\n        <br />\r\n        描述\r\n      </span>\r\n    ),\r\n    theme: \"black\",\r\n  },\r\n  { title: \"示例标题2\" },\r\n  {\r\n    title: \"示例标题3\",\r\n    icon: <img src=\"https://www.baidu.com/img/flexible/logo/pc/result.png\" />,\r\n  },\r\n  { title: \"示例标题4\", icon: \"test\" },\r\n];\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Carousel data={data} style={{ height: \"100vh\" }} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}